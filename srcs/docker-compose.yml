#Un docker compose commence toujours par dire sous quel version de docker_compose il va
#fonctionner
version : "3.9"

services:
	mariadb:
		build: ./requirements/mariadb
		container_name: mariadb
		env_file: .env
		healthcheck:
			test: ["CMD", "mysqladmin", "ping", "-u", "$MARIADB_USER", "-p$MARIADB_PASSWORD"]
			interval: 30s
			timeout: 30s
			retries: 3
		network: 
			- inception_ntw
		restart: unless-stopped
		volumes:
			- mariadb-volume:/var/lib/mysql

networks:
	inception_ntw:

volumes:
	mariadb-volume:
	driver: local
	driver_opts:
		type: volume 
		device: /home/ybrutout/data/mariadb
		o: bind

